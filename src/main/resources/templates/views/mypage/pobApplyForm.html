<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">
<body>
<div layout:fragment="content">
    <div th:if="${authError == null}">
        <div class="subpage_banner" th:style="'background-image: url(' + @{/assets/images/top_visual2.png} + ')'">
            <div class="ly_grid">
                <div class="banner_title_area">
                    <h3 class="banner_title">마이페이지</h3>
                </div>
            </div>
        </div>
        <div class="navigation"></div>

        <!-- CONTAINER -->
        <div class="container">
            <!-- CONTENT -->
            <div class="content content_mypage" th:each="item:${content}">
                <div class="ly_grid">
                    <div class="bl_title">
                        <div class="page_title">사업 신청서</div>
                    </div>

                    <!-- BOARD : WRITE -->
                    <div class="bl_boardWrite bl_boardWrite__gray">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    사업명
                                </th>
                                <td th:text="${item.bizPbancMaster.bizPbancNm}">
                                    미디어교육 평생교실new
                                </td>
                                <th scope="row">
                                    년도
                                </th>
                                <td th:text="${item.bizPbancMaster.bizPbancYr}">
                                    2022
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    사용자 정보
                                </th>
                                <td>
                                    <div class="d-flex" th:if="${#authentication.principal != null}">
                                        <span th:text="${#authentication.principal.username}">이름</span>
                                        (<span th:text="${#authentication.principal.userId}">아이디</span>)
                                        <span></span>
                                    </div>
                                    <div th:unless="${#authentication.principal != null}">
                                        사용자 정보를 찾을 수 없습니다.
                                    </div>
                                </td>
                                <th scope="row" class="lh" th:unless="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                                    사업자등록번호(고유번호)
                                </th>
                                <td th:unless="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}" th:text="${(item.organizationInfo.bizLicenseNumber)?:'-'}">
                                </td>
                                <th scope="row" th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                                    <span class="el_required">*</span>
                                    신청유형
                                </th>
                                <td th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                                    <div class="radio_box">
                                        <input id="trgtKin" type="radio" name="trgt" value="유치원_" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'),'유치원')}">
                                        <label for="trgtKin">
                                            <span></span>
                                            유치원
                                        </label>
                                    </div>
                                    <div class="radio_box">
                                        <input id="trgtEl" type="radio" name="trgt" value="초등학교_" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'),'초등학교')}">
                                        <label for="trgtEl">
                                            <span></span>
                                            초등학교
                                        </label>
                                    </div>
                                    <div class="radio_box">
                                        <input id="trgtMid" type="radio" name="trgt" value="중학교_" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'),'중학교')}">
                                        <label for="trgtMid">
                                            <span></span>
                                            중학교
                                        </label>
                                    </div>
                                    <div class="radio_box">
                                        <input id="trgtHigh" type="radio" name="trgt" value="고등학교_" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'),'고등학교')}">
                                        <label for="trgtHigh">
                                            <span></span>
                                            고등학교
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanTrgt">수업대상학년</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanTrgt"  th:value="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'))==2 ? #strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_')[1] :'-'}" data-not_null="true" data-alert_name="수업대상학년" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanTrgt"  th:value="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'))==2 ? #strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_')[1] :'-'}" data-not_null="true" data-alert_name="수업대상학년" >
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyOperMeth" >수업형태</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <select class="common_select" id="bizOrgAplyOperMeth" data-not_null="true" data-alert_name="수업형태" onchange="methEtc(this.value)" disabled>
                                        <option value="교과수업" th:selected="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업')}">교과수업</option>
                                        <option value="동아리" th:selected="${item.bizOrgAplyOperMeth =='동아리'}">동아리</option>
                                        <option value="진로" th:selected="${#strings.startsWith(item.bizOrgAplyOperMeth, '진로')}">진로수업</option>
                                        <option value="자율수업" th:selected="${item.bizOrgAplyOperMeth =='자율수업'}">자율수업</option>
                                        <option value="자유학기제" th:selected="${item.bizOrgAplyOperMeth =='자유학기제'}">자유학기제</option>
                                        <option value="기타" th:selected="${item.bizOrgAplyOperMeth =='기타'}">기타</option>
                                    </select>
                                    <th:block th:if="${(item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3)}">
                                        <th:block th:if="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내"
                                                   th:value="${#strings.replace(item.bizOrgAplyOperMeth, '교과수업_', '')}">
                                        </th:block>
                                        <th:block th:if="${#strings.startsWith(item.bizOrgAplyOperMeth, '기타_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내"
                                                   th:value="${#strings.replace(item.bizOrgAplyOperMeth, '기타_', '')}">
                                        </th:block>
                                        <th:block th:unless="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업_') || #strings.startsWith(item.bizOrgAplyOperMeth, '기타_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내">
                                        </th:block>
                                    </th:block>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <select class="common_select" id="bizOrgAplyOperMeth" data-not_null="true" data-alert_name="수업형태" onchange="methEtc(this.value)" >
                                        <option value="교과수업" th:selected="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업')}">교과수업</option>
                                        <option value="동아리" th:selected="${item.bizOrgAplyOperMeth =='동아리'}">동아리</option>
                                        <option value="진로" th:selected="${#strings.startsWith(item.bizOrgAplyOperMeth, '진로')}">진로수업</option>
                                        <option value="자율수업" th:selected="${item.bizOrgAplyOperMeth =='자율수업'}">자율수업</option>
                                        <option value="자유학기제" th:selected="${item.bizOrgAplyOperMeth =='자유학기제'}">자유학기제</option>
                                        <option value="기타" th:selected="${item.bizOrgAplyOperMeth =='기타'}">기타</option>
                                    </select>
                                    <th:block th:if="${(item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3)}">
                                        <th:block th:if="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내"
                                                   th:value="${#strings.replace(item.bizOrgAplyOperMeth, '교과수업_', '')}">
                                        </th:block>
                                        <th:block th:if="${#strings.startsWith(item.bizOrgAplyOperMeth, '기타_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내"
                                                   th:value="${#strings.replace(item.bizOrgAplyOperMeth, '기타_', '')}">
                                        </th:block>
                                        <th:block th:unless="${#strings.startsWith(item.bizOrgAplyOperMeth, '교과수업_') || #strings.startsWith(item.bizOrgAplyOperMeth, '기타_')}">
                                            <input type="text" class="common_input" id="bizOrgAplyOperMethEtc" placeholder="(선택)25자 이내">
                                        </th:block>
                                    </th:block>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- BOARD : WRITE -->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:unless="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    학교/기관 구분
                                </th>
                                <td>
                                    <span th:if="${item.organizationInfo.organizationType == '1'}">매체사</span>
                                    <span th:if="${item.organizationInfo.organizationType == '2'}">기관</span>
                                    <span th:if="${item.organizationInfo.organizationType == '3'}">학교</span>
                                </td>
                                <th scope="row">
                                    수업형태
                                </th>
                                <td>
                                    <div>
                                        <span>-</span>
                                        <input id="bizOrgAplyOperMeth" type="hidden" value="-">
                                        <input id="bizOrgAplyOperMethEtc" type="hidden" value="-">
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- BOARD : WRITE -->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:unless="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    소속학교/기관
                                </th>
                                <td colspan="3">
                                    <div class="d-flex">
                                        <input type="text" class="common_input form_input_sm me-1" th:value="${(item.organizationInfo.organizationZipCode)?:'-'}" disabled>
                                        <input type="text" class="common_input" th:value="${item.organizationInfo.organizationName}" disabled>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    대표자
                                </th>
                                <td>
                                    <input id="bizOrgAplyRprsvNm" type="text" class="common_input" th:value="${item.bizOrgAplyRprsvNm}">
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    교육기간
                                </th>
                                <td>
                                    <div class="bl_dateRange hp_md_w100p">
                                        <input type="text" id="date1" class="sdate common_input" th:value="${item.bizOrgAplyLsnPlanBgng}" disabled>
                                        <span class="blank">~</span>
                                        <input type="text" id="date2" class="edate common_input" th:value="${item.bizOrgAplyLsnPlanEnd}" disabled>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    총 교육시간
                                </th>
                                <td>
                                    <input id="bizOrgAplyTime" type="text" class="common_input" th:value="${item.bizOrgAplyTime}" disabled>
                                </td>
                                <th scope="row" class="lh">
                                    최초 총 교육시간
                                </th>
                                <td>
                                    <input id="bizOrgAplyTimeFrst" type="text" class="common_input" th:value="${item.bizOrgAplyTimeFrst}" disabled>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    담당자<br>이름(직급)
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicNm" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicNm}" data-not_null="true" data-alert_name="담당자 이름" disabled>
                                    <input id="bizOrgAplyPicJbgd" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicJbgd}" data-not_null="true" data-alert_name="담당자 직급" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicNm" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicNm}" data-not_null="true" data-alert_name="담당자 이름" >
                                    <input id="bizOrgAplyPicJbgd" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicJbgd}" data-not_null="true" data-alert_name="담당자 직급" >
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    담당자 이메일
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicEml" type="text" class="common_input" th:value="${item.bizOrgAplyPicEml}" data-not_null="true" data-alert_name="담당자 이메일" data-reg_type="email" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicEml" type="text" class="common_input" th:value="${item.bizOrgAplyPicEml}" data-not_null="true" data-alert_name="담당자 이메일" data-reg_type="email">
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    담당자 전화번호
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicTelno" type="text" class="common_input" th:value="${item.bizOrgAplyPicTelno}" data-not_null="true" data-alert_name="담당자 전화번호" data-reg_type="number" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicTelno" type="text" class="common_input" th:value="${item.bizOrgAplyPicTelno}" data-not_null="true" data-alert_name="담당자 전화번호" data-reg_type="number">
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    담당자 휴대폰
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicMpno" type="text" class="common_input" th:value="${item.bizOrgAplyPicMpno}" data-not_null="true" data-alert_name="담당자 휴대폰" data-reg_type="number" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicMpno" type="text" class="common_input" th:value="${item.bizOrgAplyPicMpno}" data-not_null="true" data-alert_name="담당자 휴대폰" data-reg_type="number">
                                </td>
                            </tr>
                            <tr id="dtlListRow" th:if="${#authentication.principal.roleGroup!='JOURNALIST'}">
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    수업시간표
                                </th>
                                <td colspan="3">
                                    <!-- COMPONENT : SCROLL -->
                                    <div class="bl_scroll bl_scroll__hor dtl_list_table" th:if="${#lists.isEmpty(item.bizOrganizationAplyDtls)}">
                                        <!-- COMPONENT : TABLE -->
                                        <table class="bl_table">
                                            <caption>수업시간표</caption>
                                            <thead>
                                            <tr>
                                                <th style="width:6%" scope="col">회차</th>
                                                <th style="width:15%" scope="col">수업일정</th>
                                                <th style="width:6%" scope="col">수업주제</th>
                                                <th style="width:6%" scope="col">수업<br>시수</th>
                                                <th style="width:14%" scope="col">시작시간</th>
                                                <th style="width:14%" scope="col">종료시간</th>
                                                <th style="width:7%" scope="col">인원<br>(명)</th>
                                                <th style="width:12%" scope="col">수업장소</th>
                                                <th style="width:10%" scope="col">비고</th>
                                                <th style="width:8%" scope="col">강사</th>
                                                <th style="width:7%" scope="col">관리</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="dtl_list">
                                                <td>
                                                    <input type="hidden" class="common_input bizOrgAplyDtlNo" value="">
                                                    <input type="hidden" class="common_input bizOrgAplyDtlIndex" value="">
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlRnd"  value="1" disabled>
                                                </td>
                                                <td>
                                                    <input type="text" class="el_datePicker common_input bizOrgAplyLsnDtlYmd" data-not_null="true" data-alert_name="수업시간표 수업일정" data-reg_type="date">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlTpic" data-not_null="true" data-alert_name="수업시간표 수업주제">
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int" disabled>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select bgng1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                        <select class="common_select bgng2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select end1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                        <select class="common_select end2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="number" onchange="changeNope()" class="common_input bizOrgAplyLsnDtlNope" data-not_null="true" data-alert_name="수업시간표 수업인원" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlPlc" data-not_null="true" data-alert_name="수업시간표 수업장소">
                                                </td>
                                                <td>
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlEtc">
                                                </td>
                                                <td>
                                                    (미배정)
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 && content[0].bizOrgAplyChgYn == 1 }">
                                                    <a class="btn_type3" onclick="addList(this)">추가</a>
                                                    <a class="btn_type3 mt-1 delete_btn" onclick="removeList(this)">삭제</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="bl_scroll bl_scroll__hor dtl_list_table" th:unless="${#lists.isEmpty(item.bizOrganizationAplyDtls)}">
                                        <!-- COMPONENT : TABLE -->
                                        <table class="bl_table">
                                            <caption>시간표</caption>
                                            <thead>
                                            <tr>
                                                <th style="width:6%" scope="col">회차</th>
                                                <th style="width:15%" scope="col">수업일정</th>
                                                <th style="width:6%" scope="col">수업주제</th>
                                                <th style="width:6%" scope="col">수업<br>시수</th>
                                                <th style="width:14%" scope="col">시작시간</th>
                                                <th style="width:14%" scope="col">종료시간</th>
                                                <th style="width:7%" scope="col">인원<br>(명)</th>
                                                <th style="width:12%" scope="col">수업장소</th>
                                                <th style="width:10%" scope="col">비고</th>
                                                <th style="width:8%" scope="col">강사</th>
                                                <th style="width:7%" scope="col">관리</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="item2,stat:${item.bizOrganizationAplyDtls}" class="dtl_list">
                                                <td>
                                                    <input type="hidden" class="common_input bizOrgAplyDtlNo" th:value="${item2.bizOrgAplyDtlNo}">
                                                    <input type="hidden" class="common_input bizOrgAplyDtlIndex" th:value="${stat.index}">
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlRnd" th:value="${item2.bizOrgAplyLsnDtlRnd}" disabled>
                                                </td>
                                                <td>
                                                    <input type="text" class="el_datePicker common_input bizOrgAplyLsnDtlYmd" th:value="${item2.bizOrgAplyLsnDtlYmd}" data-not_null="true" data-alert_name="수업시간표 수업일정" data-reg_type="date">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlTpic" th:value="${item2.bizOrgAplyLsnDtlTpic}" data-not_null="true" data-alert_name="수업시간표 수업주제">
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" th:value="${item2.bizOrgAplyLsnDtlHr}" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int" disabled>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" th:value="${item2.bizOrgAplyLsnDtlHr}" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select bgng1" th:id="${'startHour' + stat.index}" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                        <select class="common_select bgng2" th:id="${'startMin' + stat.index}" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select end1" th:id="${'endHour' + stat.index}" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                        <select class="common_select end2" th:id="${'endMin' + stat.index}" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="number" onchange="changeNope()" class="common_input bizOrgAplyLsnDtlNope" th:value="${item2.bizOrgAplyLsnDtlNope}" data-not_null="true" data-alert_name="수업시간표 수업인원" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlPlc" th:value="${item2.bizOrgAplyLsnDtlPlc}" data-not_null="true" data-alert_name="수업시간표 수업장소">
                                                </td>
                                                <td>
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlEtc" th:value="${item2.bizOrgAplyLsnDtlEtc}">
                                                </td>
                                                <td>
                                                    <span th:if="${! #lists.isEmpty(item2.bizInstructorAsgnms) }" th:text="${item2.bizInstructorAsgnms[0].bizInstructorAply.bizInstrAplyInstrNm}"></span>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 && content[0].bizOrgAplyChgYn == 1 }">
                                                    <div class="btn_type3" onclick="addList(this)">추가</div>
                                                    <th:block th:if="${#lists.isEmpty(item2.bizInstructorAsgnms) }">
                                                        <a class="btn_type3 mt-1 delete_btn" onclick="removeList(this)">삭제</a>
                                                    </th:block>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">
                                    주소
                                </th>
                                <td colspan="3">
                                    <div class="common_input_box">
                                        <div class="d-flex flex-column hp_md_w100p">
                                            <div class="d-flex">
                                                <input id="organizationZipCode" type="text" class="common_input form_input" th:value="${(item.organizationInfo.organizationZipCode)?:'-'}" readonly>
                                            </div>
                                            <input id="organizationAddress1" type="text" class="common_input form_input_lg" th:value="${(item.organizationInfo.organizationAddress1)?:'-'}" readonly>
                                            <input id="organizationAddress2" type="text" class="common_input form_input_lg" th:value="${(item.organizationInfo.organizationAddress2)?:'-'}" readonly>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="selectRegion">지역</label>
                                </th>
                                <td th:colspan="${item.bizPbancMaster.bizPbancType == 1? 1 : 3}" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <select id="selectRegion" class="common_select" data-list="regionList" data-not_null="true" data-alert_name="지역" disabled></select>
                                </td>
                                <td th:colspan="${item.bizPbancMaster.bizPbancType == 1? 1 : 3}" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <select id="selectRegion" class="common_select" data-list="regionList" data-not_null="true" data-alert_name="지역" ></select>
                                </td>
                                <th scope="row" th:if="${item.bizPbancMaster.bizPbancType == 1}">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanNope">회차당 교육인원</label>
                                </th>
                                <td th:if="${item.bizPbancMaster.bizPbancType == 1}">
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanNope" th:value="${item.bizOrgAplyLsnPlanNope}"  disabled>
                                </td>

                            </tr>
                            <tr th:if="${item.bizPbancMaster.bizPbancType == 1}">
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    신청유형
                                </th>
                                <td colspan="3">
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,0)}">
                                        <input id="type1" type="checkbox" name="applicationType" value="유아" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'유아')}" >
                                        <label for="type1">
                                            <span></span>
                                            유아
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,1)}">
                                        <input id="type2" type="checkbox" name="applicationType" value="초등학생" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'초등학생')}">
                                        <label for="type2">
                                            <span></span>
                                            초등학생
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,2)}">
                                        <input id="type3" type="checkbox" name="applicationType" value="중학생" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'중학생')}">
                                        <label for="type3">
                                            <span></span>
                                            중학생
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,3)}">
                                        <input id="type4" type="checkbox" name="applicationType" value="고등학생" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'고등학생')}">
                                        <label for="type4">
                                            <span></span>
                                            고등학생
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,4)}">
                                        <input id="type5" type="checkbox" name="applicationType" value="성인" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'성인')}">
                                        <label for="type5">
                                            <span></span>
                                            성인
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,5)}">
                                        <input id="type6" type="checkbox" name="applicationType" value="학부모" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'학부모')}">
                                        <label for="type6">
                                            <span></span>
                                            학부모
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,6)}">
                                        <input id="type7" type="checkbox" name="applicationType" value="노년층" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'노년층')}">
                                        <label for="type7">
                                            <span></span>
                                            노년층
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,7)}">
                                        <input id="type8" type="checkbox" name="applicationType" value="정보취약계층" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'정보취약계층')}">
                                        <label for="type8">
                                            <span></span>
                                            정보취약계층(장애인, 다문화 등)
                                        </label>
                                    </div>
                                    <div class="chk_box item_chk" th:if="${#arrays.contains(item.bizPbancMaster.bizPbancTmpl1.bizPbancTmpl1Trgts,8)}">
                                        <input id="type9" type="checkbox" name="applicationType" value="북한이탈주민" th:checked="${#arrays.contains(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ','),'북한이탈주민')}">
                                        <label for="type9">
                                            <span></span>
                                            북한이탈주민
                                        </label>
                                    </div>
                                    <div class="chk_box">
                                        <input id="type11" type="checkbox" name="applicationType" value="기타:" th:checked="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ':')) == 2}">
                                        <label for="type11">
                                            <span></span>

                                        </label>
                                    </div>
                                    <span th:if="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ':')) == 2}">
                                        <input placeholder="기타" class="common_input form_input_sm" type="text" id="type10" name="applicationType" th:value="${#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ':')[1]}">
                                    </span>
                                    <span th:unless="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, ':')) == 2}">
                                        <input placeholder="기타" class="common_input form_input_sm" type="text" id="type10" name="applicationType" >
                                    </span>
                                </td>
                            </tr>
                            <tr th:unless="${item.bizPbancMaster.bizPbancType == 1}">
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    수업대상학년
                                </th>
                                <td>
                                    <input th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}" type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanTrgt"  th:value="${#lists.size(#strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_'))==2 ? #strings.arraySplit(item.bizOrgAplyLsnPlanTrgt, '_')[1] :' '}" data-not_null="true" data-alert_name="수업대상학년">
                                    <input th:unless="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}" type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanTrgt"  th:value="${item.bizOrgAplyLsnPlanTrgt}" data-not_null="true" data-alert_name="수업대상학년">
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    회차당 교육인원
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanNope" th:value="${item.bizOrgAplyLsnPlanNope}" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanNope" th:value="${item.bizOrgAplyLsnPlanNope}" >
                                </td>
                            </tr>

                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    우리 학교/기관만의 특성과 추구하는 교육의 방향성 및 신청한 이유
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr1" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr1}" data-not_null="true" data-alert_name="교육의 방향성 및 신청한 이유" disabled></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr1" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr1}" data-not_null="true" data-alert_name="교육의 방향성 및 신청한 이유"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    미디어교육 운영 현황
                                </th>
                                <td colspan="3">
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr2" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr2}" data-not_null="true" data-alert_name="미디어교육 운영 현황" readonly></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr2" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr2}" data-not_null="true" data-alert_name="미디어교육 운영 현황" ></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    향후 활용계획 및 수업을 통한 기대효과
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr3" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr3}"  data-not_null="true" data-alert_name="기대효과" disabled></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr3" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr3}"  data-not_null="true" data-alert_name="기대효과"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    희망강사
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <input type="text" class="common_input instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr1" disabled>
                                    <input type="text" class="common_input ms-2 instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr2" disabled>
                                    <div class="guide_text">※ 강사배정 참고를 위한 선택사항입니다.</div>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <input type="text" class="common_input instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr1" >
                                    <input type="text" class="common_input ms-2 instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr2" >
                                    <div class="guide_text">※ 강사배정 참고를 위한 선택사항입니다.</div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    건의사항 (기타의견)
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <input id="bizOrgAplyLsnPlanEtc" type="text" class="common_input form_input_lg" th:value="${item.bizOrgAplyLsnPlanEtc}" disabled>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <input id="bizOrgAplyLsnPlanEtc" type="text" class="common_input form_input_lg" th:value="${item.bizOrgAplyLsnPlanEtc}">
                                </td>
                            </tr>
                            <tr th:if="${item.bizPbancMaster.bizPbancPeprYn==1}">
                                <th scope="row" class="lh">
                                    e-NIE(온라인 뉴스활용교육) 프로그램 신청 여부
                                </th>
                                <td colspan="3">
                                    <div class="radio_box">
                                        <input id="peprY" type="radio" name="bizOrgAplyPeprYn" th:checked="${item.bizOrgAplyPeprYn==1}">
                                        <label for="peprY">
                                            <span></span>
                                            신청
                                        </label>
                                    </div>
                                    <div class="radio_box">
                                        <input id="peprN" type="radio" name="bizOrgAplyPeprYn" th:checked="${item.bizOrgAplyPeprYn==0}">
                                        <label for="peprN">
                                            <span></span>
                                            미신청
                                        </label>
                                    </div>
                                    <div class="guide_text">※ 총 교육시간 16시간 이상 신청 시에만 지원됩니다. 한정된 예산으로 인해 모든 신청기관에 제공되지 않을 수 있습니다. </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 기관정보 -->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    학교/기관 구분
                                </th>
                                <td>
                                    <span th:if="${item.organizationInfo.organizationType == '1'}">매체사</span>
                                    <span th:if="${item.organizationInfo.organizationType == '2'}">기관</span>
                                    <span th:if="${item.organizationInfo.organizationType == '3'}">학교</span>
                                </td>
                                <th scope="row">
                                    소속학교/기관
                                </th>
                                <td>
                                    <div class="d-flex">
                                        <label for="p1_1" class="hidden_label">대표전화</label>
                                        <input id="p1_1" type="text" class="common_input form_input_sm me-1" th:value="${(item.organizationInfo.organizationZipCode)?:'-'}" disabled>
                                        <label for="p1_2" class="hidden_label">대표전화</label>
                                        <input id="p1_2" type="text" class="common_input" th:value="${item.organizationInfo.organizationName}" disabled>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="selectRegion">지역</label>
                                </th>
                                <td>
                                    <select id="selectRegion" class="common_select" data-list="regionList" data-not_null="true" data-alert_name="지역" disabled></select>
                                </td>
                                <th scope="row">
                                    주소
                                </th>
                                <td>
                                    (<span th:text="${(item.organizationInfo.organizationZipCode)?:'-'}"></span>)
                                    <span th:text="${(item.organizationInfo.organizationAddress1)?:'-'}"></span>, <span th:text="${(item.organizationInfo.organizationAddress2)?:' '}"></span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyRprsvNm">대표자명</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyRprsvNm" type="text" class="common_input"  th:value="${item.bizOrgAplyRprsvNm}" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyRprsvNm" type="text" class="common_input"  th:value="${item.bizOrgAplyRprsvNm}" >
                                </td>
                                <th scope="row" class="lh">
                                    사업자등록번호(고유번호)
                                </th>
                                <td th:text="${(item.organizationInfo.bizLicenseNumber)?:'-'}">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--                    담당자 정보-->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>

                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    담당자<br>이름(직급)
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <label for="bizOrgAplyPicNm" class="hidden_label">담당자 이름</label>
                                    <input id="bizOrgAplyPicNm" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicNm}" data-not_null="true" data-alert_name="담당자 이름" disabled>
                                    <label for="bizOrgAplyPicJbgd" class="hidden_label">담당자 직급</label>
                                    <input id="bizOrgAplyPicJbgd" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicJbgd}" data-not_null="true" data-alert_name="담당자 직급" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <label for="bizOrgAplyPicNm" class="hidden_label">담당자 이름</label>
                                    <input id="bizOrgAplyPicNm" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicNm}" data-not_null="true" data-alert_name="담당자 이름">
                                    <label for="bizOrgAplyPicJbgd" class="hidden_label">담당자 직급</label>
                                    <input id="bizOrgAplyPicJbgd" type="text" class="common_input form_input_sm" th:value="${item.bizOrgAplyPicJbgd}" data-not_null="true" data-alert_name="담당자 직급">
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyPicEml">담당자 이메일</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicEml" type="text" class="common_input" th:value="${item.bizOrgAplyPicEml}" data-not_null="true" data-alert_name="담당자 이메일" data-reg_type="email" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicEml" type="text" class="common_input" th:value="${item.bizOrgAplyPicEml}" data-not_null="true" data-alert_name="담당자 이메일" data-reg_type="email">
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyPicTelno">담당자 전화번호</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicTelno" type="text" class="common_input" th:value="${item.bizOrgAplyPicTelno}" data-not_null="true" data-alert_name="담당자 전화번호" data-reg_type="number" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicTelno" type="text" class="common_input" th:value="${item.bizOrgAplyPicTelno}" data-not_null="true" data-alert_name="담당자 전화번호" data-reg_type="number">
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyPicMpno">담당자 휴대폰</label>
                                </th>
                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9 }">
                                    <input id="bizOrgAplyPicMpno" type="text" class="common_input" th:value="${item.bizOrgAplyPicMpno}" data-not_null="true" data-alert_name="담당자 휴대폰" data-reg_type="number" disabled>
                                </td>
                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 }">
                                    <input id="bizOrgAplyPicMpno" type="text" class="common_input" th:value="${item.bizOrgAplyPicMpno}" data-not_null="true" data-alert_name="담당자 휴대폰" data-reg_type="number">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--                    교육일정-->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    교육기간
                                </th>
                                <td>
                                    <div class="bl_dateRange hp_md_w100p">
                                        <label for="date1" class="hidden_label">교육기간 시작</label>
                                        <input type="text" id="date1" class="sdate common_input" th:value="${item.bizOrgAplyLsnPlanBgng}" disabled>
                                        <span class="blank">~</span>
                                        <label for="date2" class="hidden_label">교육기간 종료</label>
                                        <input type="text" id="date2" class="edate common_input" th:value="${item.bizOrgAplyLsnPlanEnd}" disabled>
                                    </div>
                                </td>
                                <th scope="row">
                                    <label for="bizOrgAplyTime">총 교육시간</label>
                                </th>
                                <td>
                                    <input id="bizOrgAplyTime" type="text" class="common_input" th:value="${item.bizOrgAplyTime}" disabled>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <label for="bizOrgAplyTimeFrst">최초 총 교육시간</label>
                                </th>
                                <td>
                                    <input id="bizOrgAplyTimeFrst" type="text" class="common_input" th:value="${item.bizOrgAplyTimeFrst}" disabled>
                                </td>
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanNope">회차당 교육인원</label>
                                </th>
                                <td>
                                    <input type="text" class="common_input form_input_sm" id="bizOrgAplyLsnPlanNope" th:value="${item.bizOrgAplyLsnPlanNope}"  disabled>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--                    수업시간표-->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>

                            <tr id="dtlListRow" th:if="${#authentication.principal.roleGroup!='JOURNALIST'}">
                                <th scope="row">
                                    <span class="el_required">*</span>
                                    수업시간표
                                </th>
                                <td >
                                    <!-- COMPONENT : SCROLL -->
                                    <div class="bl_scroll bl_scroll__hor dtl_list_table" th:if="${#lists.isEmpty(item.bizOrganizationAplyDtls)}">
                                        <!-- COMPONENT : TABLE -->
                                        <table class="bl_table">
                                            <caption>수업시간표</caption>
                                            <thead>
                                            <tr>
                                                <th style="width:6%" scope="col">회차</th>
                                                <th style="width:15%" scope="col">수업일정</th>
                                                <th style="width:6%" scope="col">수업주제</th>
                                                <th style="width:6%" scope="col">수업<br>시수</th>
                                                <th style="width:14%" scope="col">시작시간</th>
                                                <th style="width:14%" scope="col">종료시간</th>
                                                <th style="width:7%" scope="col">인원<br>(명)</th>
                                                <th style="width:12%" scope="col">수업장소</th>
                                                <th style="width:10%" scope="col">비고</th>
                                                <th style="width:8%" scope="col">강사</th>
                                                <th style="width:7%" scope="col">관리</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="dtl_list">
                                                <td>
                                                    <input type="hidden" class="common_input bizOrgAplyDtlNo" value="">
                                                    <input type="hidden" class="common_input bizOrgAplyDtlIndex" value="">
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlRnd"  value="1" disabled>
                                                </td>
                                                <td>
                                                    <input type="text" class="el_datePicker common_input bizOrgAplyLsnDtlYmd" data-not_null="true" data-alert_name="수업시간표 수업일정" data-reg_type="date">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlTpic" data-not_null="true" data-alert_name="수업시간표 수업주제">
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int" disabled>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                                    <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select bgng1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                        <select class="common_select bgng2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <select class="common_select end1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                        <select class="common_select end2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="number" onchange="changeNope()" class="common_input bizOrgAplyLsnDtlNope" data-not_null="true" data-alert_name="수업시간표 수업인원" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlPlc" data-not_null="true" data-alert_name="수업시간표 수업장소">
                                                </td>
                                                <td>
                                                    <input type="text" class="common_input bizOrgAplyLsnDtlEtc">
                                                </td>
                                                <td>
                                                    (미배정)
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 && content[0].bizOrgAplyChgYn == 1 }">
                                                    <a class="btn_type3" onclick="addList(this)">추가</a>
                                                    <a class="btn_type3 mt-1 delete_btn" onclick="removeList(this)">삭제</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="bl_scroll bl_scroll__hor dtl_list_table" th:unless="${#lists.isEmpty(item.bizOrganizationAplyDtls)}">
                                        <!-- COMPONENT : TABLE -->
                                        <table class="bl_table">
                                            <caption>수업계획표</caption>
                                            <thead>
                                            <tr>
                                                <th style="width:6%" scope="col">회차</th>
                                                <th style="width:15%" scope="col">수업일정</th>
                                                <th style="width:6%" scope="col">수업주제</th>
                                                <th style="width:6%" scope="col">수업<br>시수</th>
                                                <th style="width:14%" scope="col">시작시간</th>
                                                <th style="width:14%" scope="col">종료시간</th>
                                                <th style="width:7%" scope="col">인원<br>(명)</th>
                                                <th style="width:12%" scope="col">수업장소</th>
                                                <th style="width:10%" scope="col">비고</th>
                                                <th style="width:8%" scope="col">강사</th>
                                                <th style="width:7%" scope="col">관리</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="item2,stat:${item.bizOrganizationAplyDtls}" class="dtl_list">
                                                <td>
                                                    <input th:id="${'p001'+stat.index}" type="hidden" class="common_input bizOrgAplyDtlNo" th:value="${item2.bizOrgAplyDtlNo}">
                                                    <input th:id="${'p002'+stat.index}" type="hidden" class="common_input bizOrgAplyDtlIndex" th:value="${stat.index}">
                                                    <label th:for="${'p003'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p003'+stat.index}" type="text" class="common_input bizOrgAplyLsnDtlRnd" th:value="${item2.bizOrgAplyLsnDtlRnd}" disabled>
                                                </td>
                                                <td>
                                                    <label th:for="${'p004'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p004'+stat.index}" type="text" class="el_datePicker common_input bizOrgAplyLsnDtlYmd" th:value="${item2.bizOrgAplyLsnDtlYmd}" data-not_null="true" data-alert_name="수업시간표 수업일정" data-reg_type="date">
                                                </td>
                                                <td>
                                                    <label th:for="${'p005'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p005'+stat.index}" type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlTpic" th:value="${item2.bizOrgAplyLsnDtlTpic}" data-not_null="true" data-alert_name="수업시간표 수업주제">
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                                    <label th:for="${'p006'+stat.index}" class="hidden_label" disabled>라벨</label>
                                                    <input th:id="${'p006'+stat.index}" type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" th:value="${item2.bizOrgAplyLsnDtlHr}" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int" disabled>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                                    <label th:for="${'p006'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p006'+stat.index}" type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" th:value="${item2.bizOrgAplyLsnDtlHr}" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <label th:for="${'startHour'+stat.index}" class="hidden_label">라벨</label>
                                                        <label th:for="${'startMin'+stat.index}" class="hidden_label">라벨</label>
                                                        <select class="common_select bgng1" th:id="${'startHour' + stat.index}" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                        <select class="common_select bgng2" th:id="${'startMin' + stat.index}" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="time_select">
                                                        <label th:for="${'endHour'+stat.index}" class="hidden_label">라벨</label>
                                                        <label th:for="${'endMin'+stat.index}" class="hidden_label">라벨</label>
                                                        <select class="common_select end1" th:id="${'endHour' + stat.index}" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                        <select class="common_select end2" th:id="${'endMin' + stat.index}" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간"></select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <label th:for="${'p011'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p011'+stat.index}" type="number" onchange="changeNope()" class="common_input bizOrgAplyLsnDtlNope" th:value="${item2.bizOrgAplyLsnDtlNope}" data-not_null="true" data-alert_name="수업시간표 수업인원" data-reg_type="int">
                                                </td>
                                                <td>
                                                    <label th:for="${'p012'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p012'+stat.index}" type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlPlc" th:value="${item2.bizOrgAplyLsnDtlPlc}" data-not_null="true" data-alert_name="수업시간표 수업장소">
                                                </td>
                                                <td>
                                                    <label th:for="${'p013'+stat.index}" class="hidden_label">라벨</label>
                                                    <input th:id="${'p013'+stat.index}" type="text" class="common_input bizOrgAplyLsnDtlEtc" th:value="${item2.bizOrgAplyLsnDtlEtc}">
                                                </td>
                                                <td>
                                                    <span th:if="${! #lists.isEmpty(item2.bizInstructorAsgnms) }" th:text="${item2.bizInstructorAsgnms[0].bizInstructorAply.bizInstrAplyInstrNm}"></span>
                                                </td>
                                                <td th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 && content[0].bizOrgAplyChgYn == 1 }">
                                                    <a class="btn_type3" onclick="addList(this)">추가</a>
                                                    <th:block th:if="${#lists.isEmpty(item2.bizInstructorAsgnms) }">
                                                        <a class="btn_type3 mt-1 delete_btn" onclick="removeList(this)">삭제</a>
                                                    </th:block>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 기타항목 -->
                    <div class="bl_boardWrite bl_boardWrite__gray"  th:if="${item.bizPbancMaster.bizPbancType==2||item.bizPbancMaster.bizPbancType==3}">
                        <table>
                            <caption>사업신청서</caption>
                            <colgroup>
                                <col class="hp_lg_w150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanDscr1">우리 학교/기관만의 특성과 추구하는 교육의 방향성 및 신청한 이유</label>
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr1" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr1}" data-not_null="true" data-alert_name="교육의 방향성 및 신청한 이유" disabled></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr1" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr1}" data-not_null="true" data-alert_name="교육의 방향성 및 신청한 이유"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanDscr2">미디어교육 운영 현황</label>
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr2" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr2}" data-not_null="true" data-alert_name="미디어교육 운영 현황" disabled></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr2" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr2}" data-not_null="true" data-alert_name="미디어교육 운영 현황" ></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <span class="el_required">*</span>
                                    <label for="bizOrgAplyLsnPlanDscr3">향후 활용계획 및 수업을 통한 기대효과</label>
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr3" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr3}"  data-not_null="true" data-alert_name="기대효과" disabled></textarea>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <textarea id="bizOrgAplyLsnPlanDscr3" cols="30" rows="10" class="common_input" th:text="${item.bizOrgAplyLsnPlanDscr3}"  data-not_null="true" data-alert_name="기대효과"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <label for="bizOrgAplyLsnPlanEtcInstr1">희망강사 </label>
                                    <label for="bizOrgAplyLsnPlanEtcInstr2" class="hidden_label">희망강사2</label>
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <input type="text" class="common_input instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr1" disabled>
                                    <input type="text" class="common_input ms-2 instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr2" disabled>
                                    <div class="guide_text">※ 강사배정 참고를 위한 선택사항입니다.</div>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <input type="text" class="common_input instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr1" >
                                    <input type="text" class="common_input ms-2 instr-list" placeholder="클릭 시 검색됩니다." id="bizOrgAplyLsnPlanEtcInstr2" >
                                    <div class="guide_text">※ 강사배정 참고를 위한 선택사항입니다.</div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="lh">
                                    <label for="bizOrgAplyLsnPlanEtc">건의사항 (기타의견)</label>
                                </th>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts == 2 || content[0].bizOrgAplyStts == 9}">
                                    <input id="bizOrgAplyLsnPlanEtc" type="text" class="common_input form_input_lg" th:value="${item.bizOrgAplyLsnPlanEtc}" disabled>
                                </td>
                                <td colspan="3" th:if="${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9}">
                                    <input id="bizOrgAplyLsnPlanEtc" type="text" class="common_input form_input_lg" th:value="${item.bizOrgAplyLsnPlanEtc}">
                                </td>
                            </tr>
                            <tr th:if="${item.bizPbancMaster.bizPbancPeprYn==1}">
                                <th scope="row" class="lh">
                                    e-NIE(온라인 뉴스활용교육) 프로그램 신청 여부
                                </th>
                                <td>
                                    <div class="radio_box">
                                        <input id="peprY" type="radio" name="bizOrgAplyPeprYn" th:checked="${item.bizOrgAplyPeprYn==1}">
                                        <label for="peprY">
                                            <span></span>
                                            신청
                                        </label>
                                    </div>
                                    <div class="radio_box">
                                        <input id="peprN" type="radio" name="bizOrgAplyPeprYn" th:checked="${item.bizOrgAplyPeprYn==0}">
                                        <label for="peprN">
                                            <span></span>
                                            미신청
                                        </label>
                                    </div>
                                    <div class="guide_text">※ 총 교육시간 16시간 이상 신청 시에만 지원됩니다. 한정된 예산으로 인해 모든 신청기관에 제공되지 않을 수 있습니다. </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bl_gridBtns">
                        <div class="bl_gridBtns_md">
                            <div id="update" class="btn_type1 btn_gray">임시저장</div>
                            <div id="create" class="btn_type1 btn_blue">제출하기</div>
                        </div>
                        <div class="bl_gridBtns_rgt">
                            <a class="btn_type2" href="/mypage/business-state/apply">목록</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- POPUP : 강사등록 -->
        <div class="iframe_wrap">
            <iframe id="addInstructor" title="강사등록" src="about:blank" style="width:100%;"></iframe>
        </div>
    </div>
    <div th:unless="${authError == null}">
        <div th:include="@{views/error/accessRestriction}"></div>
    </div>

    <th:block layout:fragment="script">
        <script th:inline="javascript">
            if( [[${authError}]] == null ) {


                var bizPbancMaxTm = 0;
                var bizStts = true;
                var bizStts2 = false;
                let CONT =  [[ ${content} ]];

                // 수정불가 && 승인 상태에서 수정불가
                if(CONT[0].bizOrgAplyChgYn==0 && CONT[0].bizOrgAplyStts=="2"){
                    $("#update").remove();
                    $("#create").remove();
                    alert('이미 승인된 사업신청입니다. 정보변경가능 상태는 해당 사업의 운영팀에 문의를 부탁드립니다.');
                    window.location.replace('/mypage/business-state/apply');
                }

                $("#create").bind("click",function (e){
                    $("#selectRegion").attr("disabled",false);
                    $("#bizOrgAplyOperMeth").attr("disabled",false);
                    if(CONT[0].bizPbancMaster.bizPbancSlctnMeth==1 && CONT[0].bizOrgAplyStts=='0' &&CONT[0].orgAplyCnt >= CONT[0].bizPbancMaster.bizPbancMaxInst){
                        alert('선착순 마감되었습니다.')
                        window.history.back();
                        // 승인되고 변경 불가(기본)인 상태에서는 수정 불가
                    }else if(CONT[0].bizOrgAplyStts=='2' && CONT[0].bizOrgAplyChgYn == 0){
                        alert('승인된 신청서는 수정하실 수 없습니다. 담당자에게 문의해 주세요.');
                    }else if(nullCheck() &&totalClassTimeSet()){
                        let params = getFormData();
                        // 승인된 신청서를 수정하면 가승인으로 처리하기 때문에 접수로 바꾸고 바로 다시 승인
                        if(CONT[0].bizPbancMaster.bizPbancSlctnMeth==1 ){
                            bizStts2 = true ;
                            params.bizOrgAplyStts = 1 ;
                        }else{
                            params.bizOrgAplyStts = 1 ;
                        }
                        if($("input:radio[name=trgt]").length == 4){
                            if($("input:radio[name=trgt]:checked").length==1){
                                sendData(params,'사업신청서를 제출하였습니다.')
                            }else{
                                alert('신청 유형(유치원, 초등학교, 중학교, 고등학교)을 선택해 주세요.');
                            }
                        }else{
                            sendData(params,'사업신청서를 제출하였습니다.')
                        }
                    }
                })
                $("#update").bind("click",function (e){
                    $("#selectRegion").attr("disabled",false);
                    $("#bizOrgAplyOperMeth").attr("disabled",false);
                    if(nullCheck() && totalClassTimeSet()){
                        if (checkTimes() < 1) {
                            let params = getFormData();
                            params.bizOrgAplyStts = 0 ;
                            if($("input:radio[name=trgt]").length == 4){
                                if($("input:radio[name=trgt]:checked").length==1){
                                    sendData(params,'사업신청서를 임시저장하였습니다.')
                                }else{
                                    alert('신청 유형(유치원, 초등학교, 중학교, 고등학교)을 선택해 주세요.');
                                }
                            }else{
                                sendData(params,'사업신청서를 임시저장하였습니다.')
                            }
                        } else alert("수업시간표의 종료시간과 시작시간의 차이가 최소시간 미만인 회차가 있습니다. 재확인 해주세요.")
                    }
                })
                function checkTimes(){
                    var start = 0;
                    var end = 0;
                    var check = 0;
                    $(".dtl_list").each(function (index, item){
                        start = ($(this).find(".bgng1").val() * 60) + $(this).find(".bgng2").val()
                        end = ($(this).find(".end1").val() * 60) + $(this).find(".end2").val()
                        if ((end - start) < 30) check += 1
                    })
                    return check;
                }

                function sendData(params, successText){
                    $("#selectRegion").attr("disabled",false);
                    $("#bizOrgAplyOperMeth").attr("disabled",false);
                    if(confirm("저장하시겠습니까?")) {
                        $.ajax({
                            type: "put",
                            headers: {'Content-Type' : 'application/json'},
                            url: "/api/business/organization/aply/update",
                            data: JSON.stringify(params),
                            dataType: "json",
                            success: function (data){
                                let dtlData = getDtlData(data.bizOrgAplyNo)
                                if(dtlData.length==0){
                                    alert(successText)
                                    window.location.replace("/mypage/business-state/apply");
                                }else{
                                    dtlData.forEach(item=>{
                                        if(item.bizOrgAplyDtlNo =="BOAD0000000"){
                                            $.ajax({
                                                type: "post",
                                                headers: {'Content-Type' : 'application/json'},
                                                url: `/api/business/organization/aply/dtl/create`,
                                                data: JSON.stringify(item),
                                                dataType: "json",
                                                async:false,
                                            })
                                        }else{
                                            $.ajax({
                                                type: "put",
                                                headers: {'Content-Type' : 'application/json'},
                                                url: `/api/business/organization/aply/dtl/update`,
                                                data: JSON.stringify(item),
                                                dataType: "json",
                                                async:false,
                                            })
                                        }
                                        if(item ==dtlData[dtlData.length-1]){
                                            if(bizStts2){
                                                params.bizOrgAplyStts=2;
                                                $.ajax({
                                                    type: "put",
                                                    headers: {'Content-Type' : 'application/json'},
                                                    url: `/api/business/organization/aply/update`,
                                                    data: JSON.stringify(params),
                                                    dataType: "json",
                                                    async:false,
                                                })
                                            }
                                            alert(successText)
                                            window.location.replace("/mypage/business-state/apply");
                                        }
                                    })
                                }
                            },
                            error: function (e){
                                if(e && e.responseJSON && e.responseJSON.resultMessage){
                                    alert(e.responseJSON.resultMessage);
                                }else{
                                    alert('사업신청서를 저장하는 과정에서 오류가 발생하였습니다.');
                                }
                            }
                        })
                    }
                }

                //회차당 평균 교육인원 계산 함수
                function changeNope(){
                    let Nope = $('.bizOrgAplyLsnDtlNope')
                    let length =Nope.length;
                    let data = 0;
                    for(let i of Nope){
                        if(i.value && parseInt(i.value)){
                            data += parseInt(i.value);
                        }
                    }
                    data = Math.ceil(data/length)
                    if(data){
                        $("#bizOrgAplyLsnPlanNope").val(data);
                    }else{
                        $("#bizOrgAplyLsnPlanNope").val(0);
                        alert('수업시간표 인원에는 숫자만 입력해 주세요.');
                    }
                }

                /* <![CDATA[ */
                function getDtlData(bizOrgAplyNo){
                    let itemArray = [];
                    let temp = {}
                    $(".dtl_list").each(function (index, item){
                        temp ={bizOrgAplyNo : bizOrgAplyNo}
                        temp.bizOrgAplyLsnDtlEtc = $(this).find(".bizOrgAplyLsnDtlEtc").val();
                        temp.bizOrgAplyLsnDtlHr = parseInt($(this).find(".bizOrgAplyLsnDtlHr").val());
                        temp.bizOrgAplyLsnDtlNope =parseInt($(this).find(".bizOrgAplyLsnDtlNope").val());
                        temp.bizOrgAplyLsnDtlPlc = $(this).find(".bizOrgAplyLsnDtlPlc").val();
                        temp.bizOrgAplyLsnDtlRnd = parseInt($(this).find(".bizOrgAplyLsnDtlRnd").val());
                        temp.bizOrgAplyLsnDtlTpic = $(this).find(".bizOrgAplyLsnDtlTpic").val();
                        temp.bizOrgAplyLsnDtlYmd = $(this).find(".bizOrgAplyLsnDtlYmd").val();
                        temp.bizOrgAplyLsnDtlBgngTm = $(this).find(".bgng1").val()+":"
                        temp.bizOrgAplyLsnDtlBgngTm += $(this).find(".bgng2").val()=="0"?"00":$(this).find(".bgng2").val();
                        temp.bizOrgAplyLsnDtlBgngTm = temp.bizOrgAplyLsnDtlBgngTm.replace("60", "00");
                        temp.bizOrgAplyLsnDtlEndTm = $(this).find(".end1").val()+":"
                        temp.bizOrgAplyLsnDtlEndTm += $(this).find(".end2").val()=="0"?"00":$(this).find(".end2").val();
                        temp.bizOrgAplyLsnDtlEndTm = temp.bizOrgAplyLsnDtlEndTm.replace("60", "00");
                        temp.bizOrgAplyDtlNo = $(this).find(".bizOrgAplyDtlNo").val()!='' ? $(this).find(".bizOrgAplyDtlNo").val() :"BOAD0000000";
                        itemArray.push(temp)
                    })
                    return itemArray;
                }
                function getDtlOrig(){
                    let CONT =  [[ ${content} ]];
                    return CONT[0].bizOrganizationAplyDtls;
                }
                function getFormData(){
                    let params = {};
                    params.bizInstructor = CONT[0].bizInstructor;
                    params.bizOrgAplyChgYn =  CONT[0].bizOrgAplyChgYn;
                    params.bizOrgAplyFile = CONT[0].bizOrgAplyFile;
                    params.bizOrgAplyLsnPlanBgng = $("#date1").val();
                    params.bizOrgAplyLsnPlanEnd = $("#date2").val();
                    params.bizOrgAplyLsnPlanDscr1 = $("#bizOrgAplyLsnPlanDscr1").val();
                    params.bizOrgAplyLsnPlanDscr2 = $("#bizOrgAplyLsnPlanDscr2").val();
                    params.bizOrgAplyLsnPlanDscr3 = $("#bizOrgAplyLsnPlanDscr3").val();
                    params.bizOrgAplyLsnPlanEtc = $("#bizOrgAplyLsnPlanEtc").val();
                    params.bizOrgAplyLsnPlanEtcInstr = $("#bizOrgAplyLsnPlanEtcInstr1").val();
                    params.bizOrgAplyLsnPlanEtcInstr += $("#bizOrgAplyLsnPlanEtcInstr2").val()!='' && $("#bizOrgAplyLsnPlanEtcInstr1").val()!=''?',':'';
                    params.bizOrgAplyLsnPlanEtcInstr += $("#bizOrgAplyLsnPlanEtcInstr2").val();
                    params.bizOrgAplyLsnPlanNope = $("#bizOrgAplyLsnPlanNope").val();
                    if(CONT[0].bizPbancMaster.bizPbancType==1){
                        params.bizOrgAplyLsnPlanTrgt = new Array($("[name=applicationType]:checked").length);
                        $("[name=applicationType]:checked").each((index,item)=>{
                            params.bizOrgAplyLsnPlanTrgt[index] = $(item).val();
                        })
                        params.bizOrgAplyLsnPlanTrgt = params.bizOrgAplyLsnPlanTrgt.toString()
                        if($("#type11[name=applicationType]:checked").length==1){
                            params.bizOrgAplyLsnPlanTrgt+=$("#type10").val()!=""?$("#type10").val() : "기타";
                        }
                        if(params.bizOrgAplyLsnPlanTrgt==""){
                            params.bizOrgAplyLsnPlanTrgt="-"
                        }
                    }else if(CONT[0].bizPbancMaster.bizPbancType==2 || CONT[0].bizPbancMaster.bizPbancType==3){
                        params.bizOrgAplyLsnPlanTrgt =$("input:radio[name=trgt]:checked").val() ? $("input:radio[name=trgt]:checked").val() : "";
                        params.bizOrgAplyLsnPlanTrgt += $("#bizOrgAplyLsnPlanTrgt").val();
                    }else{
                        params.bizOrgAplyLsnPlanTrgt = $("#bizOrgAplyLsnPlanTrgt").val();
                    }
                    params.bizOrgAplyNo = CONT[0].bizOrgAplyNo;
                    params.bizOrgAplyOperCtgr = $("#bizOrgAplyOperCtgr").text() ?$("#bizOrgAplyOperCtgr").text() :"-" ;
                    params.bizOrgAplyOperMeth =  ($("#bizOrgAplyOperMeth").val().startsWith('교과수업') || $("#bizOrgAplyOperMeth").val().startsWith('기타')) && $("#bizOrgAplyOperMethEtc").val() ? $("#bizOrgAplyOperMeth").val() + '_' + $("#bizOrgAplyOperMethEtc").val() : $("#bizOrgAplyOperMeth").val();
                    params.bizOrgAplyPicEml = $("#bizOrgAplyPicEml").val();
                    params.bizOrgAplyPicJbgd =  $("#bizOrgAplyPicJbgd").val();
                    params.bizOrgAplyPicMpno =  $("#bizOrgAplyPicMpno").val();
                    params.bizOrgAplyPicTelno =  $("#bizOrgAplyPicTelno").val();
                    params.bizOrgAplyPicNm =  $("#bizOrgAplyPicNm").val();
                    params.bizOrgAplyRgn =  $("#selectRegion").val();
                    params.bizOrgAplyRprsvNm =  $("#bizOrgAplyRprsvNm").val() ? $("#bizOrgAplyRprsvNm").val() : "테스트";
                    params.bizOrgAplyStts =  CONT[0].bizOrgAplyStts;
                    params.bizOrgAplySttsCmnt = CONT[0].bizOrgAplySttsCmnt;
                    params.bizOrgAplyPeprYn = $("input:radio[name=bizOrgAplyPeprYn]:checked").attr('id') == 'peprY'?1:0;
                    params.bizOrgAplyTime = $("#bizOrgAplyTime").val();
                    params.bizOrgAplyTimeFrst = $("#bizOrgAplyTimeFrst").val();
                    params.bizPbancNo =CONT[0].bizPbancNo;
                    params.orgCd=CONT[0].orgCd;

                    let auth =  [[ ${#authentication} ]];
                    params.bizOrgAplyPic=auth.principal.userId;

                    return params;
                }

                window.addEventListener('message', handleDocHeightMsg, false); // 메시지 수신 이벤트 등록

                let instrPopupId;
                function handleDocHeightMsg(eventObj) { // 메시지 수신 처리를 위한 함수
                    setPopData(eventObj.data);
                }
                function setPopData(data){
                    if(data && data.userId){
                        $(`#${instrPopupId}`).val(`${data.instrNm}(${data.userId.substring(0,3)}*****)`)
                    }else if(data && data.instrEml){
                        $(`#${instrPopupId}`).val(`${data.instrNm}(${data.instrEml.substring(0,3)}*****)`)
                    }else{
                        $(`#${instrPopupId}`).val(null);
                    }
                }

                function onLoadSubmit() {
                    console.log('commonCode: ', [[ ${commonCode} ]] )
                    navigation(0,0,0);

                    $(".instr-list").each((index,item)=>{
                        $(item).bind('click', function (){
                            instrPopupId=$(this).attr("id");
                            openPop('', '/business/pbanc/pop/instr', 'addInstructor');
                        })
                    })
                    methEtc($('#bizOrgAplyOperMeth').val())

                    let CONT = [[ ${content} ]];
                    let now = new Date();
                    now.setUTCHours(now.getUTCHours()+9);
                    let toDay = now.toJSON().split('T')[0];
                    let endDate = CONT[0].bizPbancMaster.bizPbancRcptEnd;
                    let bizOrgAplyStts = CONT[0].bizOrgAplyStts;
                    if(toDay>endDate){
                        if(bizOrgAplyStts == 0){
                            $("#create").remove();
                        }else if(bizOrgAplyStts == 1){
                            $("#update").remove();
                        }
                    }
                    if(bizOrgAplyStts == 1){
                        $("#update").remove();
                    }
                    if(CONT != null){
                        bizPbancMaxTm = CONT[0].bizPbancMaster.bizPbancMaxTm ? CONT[0].bizPbancMaster.bizPbancMaxTm  : 0;
                        if(CONT[0].bizOrgAplyStts==2){
                            bizStts=false
                        }
                    }
                    setTimeout(()=>{
                        $(".ui-datepicker-calendar").append(`<caption>날짜선택용</caption>`)
                        if(CONT[0].bizOrgAplyLsnPlanEtcInstr){
                            if(CONT[0].bizOrgAplyLsnPlanEtcInstr.split(',').length>1){
                                $("#bizOrgAplyLsnPlanEtcInstr1").val(CONT[0].bizOrgAplyLsnPlanEtcInstr.split(',')[0])
                                $("#bizOrgAplyLsnPlanEtcInstr2").val(CONT[0].bizOrgAplyLsnPlanEtcInstr.split(',')[1])
                            }else{
                                $("#bizOrgAplyLsnPlanEtcInstr1").val(CONT[0].bizOrgAplyLsnPlanEtcInstr)
                            }
                        }
                        // 수정 필요 setTimeout 사용 지양해야함...
                        planDtl();
                        $(".el_datePicker").each((index, item)=> {
                            let getYear = new Date().getFullYear();
                            $(item).datepicker("option", "maxDate", CONT[0].bizPbancMaster.bizPbancSprtEnd); // 사업공고 종료일까지 지원
                            $(item).datepicker("option", "minDate", CONT[0].bizPbancMaster.bizPbancSprtBgng); // 사업공고 지원시작일부터 지원
                        });
                        $(".bizOrgAplyLsnDtlYmd").each((index, item)=>{
                            $(item).datepicker("option", "onClose", ( ) =>{
                                planDtl()
                            });
                        })
                        $('.bizOrgAplyLsnDtlHr').each(function(index, item){
                            $(item).change(function (){changeDtlHr(this)})
                        })
                        CONT[0].bizOrganizationAplyDtls.forEach((item,index) => {
                            setSelected(item.bizOrgAplyLsnDtlBgngTm.substring(0,2), 'startHour'+index);
                            if(item.bizOrgAplyLsnDtlBgngTm.substring(3,5) == '00'){
                                setSelected(0, 'startMin'+index);
                            } else {
                                setSelected(item.bizOrgAplyLsnDtlBgngTm.substring(3,5), 'startMin'+index);
                            }
                            setSelected(item.bizOrgAplyLsnDtlEndTm.substring(0,2), 'endHour'+index);
                            if(item.bizOrgAplyLsnDtlEndTm.substring(3,5) == '00'){
                                setSelected(0, 'endMin'+index);
                            } else {
                                setSelected(item.bizOrgAplyLsnDtlEndTm.substring(3,5), 'endMin'+index);
                            }
                            setSelected(CONT[0].bizOrgAplyRgn, 'selectRegion')
                            totalClassTimeSet();
                        })
                    }, 100)
                }
                function makeScheduleTr(cloneTarget){
                    var ckContent = [[ ${content} ]]
                    console.log(ckContent);
                    cloneTarget = cloneTarget ? cloneTarget : $(`
                        <tr class="dtl_list">
                            <td>
                                <input type="hidden" class="common_input bizOrgAplyDtlNo" value="">
                                <input type="hidden" class="common_input temp" value="">
                                <input type="text" class="common_input bizOrgAplyLsnDtlRnd" data-not_null="true" data-alert_name="수업시간표 회차" data-reg_type="int" disabled>
                            </td>
                            <td>
                                <input type="text" class="el_datePicker common_input bizOrgAplyLsnDtlYmd" data-not_null="true" data-alert_name="수업시간표 수업일정" data-reg_type="date">
                            </td>
                            <td>
                                <input type="text" maxlength="200" onchange="maxCheck(this)" class="common_input bizOrgAplyLsnDtlTpic" data-not_null="true" data-alert_name="수업시간표 수업주제">
                            </td>
                            <td >
                                <input type="number" min="2" class="common_input bizOrgAplyLsnDtlHr" oninput="this.value=this.value.replace(/[^-0-9]/g,'');" data-not_null="true" data-alert_name="수업시간표 수업시수" data-reg_type="int" >
                            </td>
                            <td>
                                <div class="time_select">
                                    <select class="common_select bgng1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                    <select class="common_select bgng2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 시작시간"></select>
                                </div>
                            </td>
                            <td>
                                <div class="time_select">
                                    <select class="common_select end1" data-list="hourList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간" disabled></select>
                                    <select class="common_select end2" data-list="minuteList" onchange="classTime(this)" data-not_null="true" data-alert_name="수업시간표 종료시간" disabled></select>
                                </div>
                            </td>
                            <td>
                                <input type="number" onchange="changeNope()" class="common_input bizOrgAplyLsnDtlNope" data-not_null="true" data-alert_name="수업시간표 수업인원" data-reg_type="int">
                            </td>
                            <td>
                                <input type="text" class="common_input bizOrgAplyLsnDtlPlc" data-not_null="true" data-alert_name="수업시간표 수업장소">
                            </td>
                            <td>
                                <input type="text" class="common_input bizOrgAplyLsnDtlEtc">
                            </td>
                            <td> - </td>
                            <td id="tmtable">
                                <a href="javascript: void(0)" class="btn_type3" onclick="addList(this)">추가</a>
                                <a href="javascript: void(0)" class="btn_type3 mt-1 delete_btn" onclick="removeList(this)">삭제</a>
                            </td>
                        </tr>
                    `);
                    var ckContent = [[ ${content} ]]
                    console.log(ckContent[0]);
                    // if(${ content[0].bizOrgAplyStts != 2 && content[0].bizOrgAplyStts != 9 && content[0].bizOrgAplyChgYn == 1 )
                    if(ckContent[0].bizOrgAplyStts != 2 && ckContent[0].bizOrgAplyStts !=9 && ckContent[0].bizOrgAplyChgYn ==1 ){
                        // $('.chk_box').style.display="none";
                    }
                    cloneTarget.find('.bizOrgAplyLsnDtlHr').each(function(idx,el){
                        $(el).change(function (){changeDtlHr(this)})
                    })
                    cloneTarget.find(".el_datePicker").each(function(idx,el){
                        CommonUI.datePicker(el);
                        let getYear=new Date().getFullYear();
                        $(el).datepicker("option", "maxDate", CONT[0].bizPbancMaster.bizPbancSprtEnd); // 사업공고 종료일까지 지원
                        $(el).datepicker("option", "minDate", CONT[0].bizPbancMaster.bizPbancSprtBgng); // 사업공고 지원시작일부터 지원
                        $(el).datepicker("option", "onClose", ( ) =>{
                            planDtl()
                        });
                    })
                    cloneTarget.find(".common_select").each(function(idx, el){
                        CommonUI.dataListSelectBox(el);
                    })
                    return cloneTarget[0];
                }

                //수업기간에 따른 교육기간 설정
                function planDtl(){
                    let dtlDate = new Array( $('.bizOrgAplyLsnDtlYmd').length);
                    $('.bizOrgAplyLsnDtlYmd').each((index, item)=>{
                        dtlDate[index] = $(item).val()==""? null:$(item).val();
                    })
                    let maxDate = "2000-00-00"
                    let minDate = "3000-00-00";
                    for(let i=0; i<dtlDate.length; i++){
                        if(dtlDate[i]<minDate){
                            minDate=dtlDate[i];
                        }
                        if(dtlDate[i]>maxDate){
                            maxDate=dtlDate[i];
                        }
                        if((i+1)==dtlDate.length){
                            if(minDate!="3000-00-00"){
                                $('#date1').val(minDate);
                            }
                            if(maxDate!="2000-00-00"){
                                $('#date2').val(maxDate);
                            }
                        }
                    }
                    sortPlanDtl();
                }

                //날짜 순으로 정렬
                function sortPlanDtl(){
                    let n = $('.bizOrgAplyLsnDtlYmd').length;
                    let nowDate, nextDate;
                    let nowTime, nextTime;
                    for (let i=n-1; i>0; i--) {
                        for (let j=0; j<i; j++) {
                            nowDate=$('.bizOrgAplyLsnDtlYmd')[j].value;
                            nextDate=$('.bizOrgAplyLsnDtlYmd')[j+1].value;
                            if (nowDate > nextDate) {
                                moveDown($('.bizOrgAplyLsnDtlYmd')[j])
                            }else if(nowDate==nextDate){
                                // 같은 날이면 시작 시간 순으로 정렬
                                nowTime = $(".bgng1")[j].value;
                                nextTime=$('.bgng1')[j+1].value;
                                if(nowTime>nextTime){
                                    moveDown($('.bizOrgAplyLsnDtlYmd')[j])
                                }
                            }
                        }
                        if(i==1){
                            dtlRnd();
                        }
                    }

                }

                //아래행과 위치변경
                function moveDown(el){
                    let $tr = $(el).parent().parent();
                    $tr.next().after($tr);
                }

                //회차 계산
                function dtlRnd(){
                    $(".bizOrgAplyLsnDtlRnd").each((index,item)=>{
                        $(item).val(index+1);
                    })
                }
                function addList(addBtn) {
                    // node 선택
                    let cloneDiv = addBtn.parentElement.parentElement;
                    let timeNow =parseInt($("#bizOrgAplyTime").val()) ? parseInt($("#bizOrgAplyTime").val()):0;
                    let timeMax = parseInt($(cloneDiv).find(".bizOrgAplyLsnDtlHr").val()) + parseInt(timeNow);

                    //수업시수를 초과하지 않을 때만
                    if(timeNow+2<=bizPbancMaxTm){
                        // 노드 복사하기 (deep copy)
                        let newDiv = makeScheduleTr();

                        // input 값 초기화
                        let input = newDiv.querySelectorAll('input');
                        if(cloneDiv){
                            let cloneInput = $(cloneDiv).find('input');
                            let count=0;
                            input.forEach(item => {
                                if($(item).attr('type')!="hidden"){
                                    item.value = cloneInput[count].value;
                                }
                                count+=1;
                            })
                        }else{
                            input.forEach(item => {
                                item.value = '';
                            })
                        }

                        // select 값 초기화
                        let select = newDiv.querySelectorAll('select');
                        if(cloneDiv){
                            let cloneSelect= $(cloneDiv).find('select');
                            let count=0;

                            if($(cloneSelect[0]).val()!=0){
                                $(select[2]).removeAttr('disabled');
                                $(select[3]).removeAttr('disabled');
                            }
                            select.forEach(item => {
                                for (let i = 0; i < item.options.length; i++) {
                                    item.options[i].removeAttribute('selected');
                                }
                                if( $(cloneSelect[count]).val() ){
                                    $(item).val($(cloneSelect[count]).val()).prop("selected", true);
                                    count++;
                                }
                            })
                        }else{
                            select.forEach(item => {
                                for (let i = 0; i < item.options.length; i++) {
                                    item.options[i].removeAttribute('selected');
                                }
                                if( item.options.length ){
                                    item.options[0].setAttribute('selected', true);
                                }
                                if($(item).attr("data-list")=="minuteList"){
                                    $(item).val("60").prop("selected", false);
                                    $(item).val("00").prop("selected", true);
                                }
                            })
                        }

                        // 복제할 값보다는 남은 수업시수가 적다면 남은 값으로 적용
                        if(timeMax>bizPbancMaxTm ){
                            $(newDiv).find(".bizOrgAplyLsnDtlHr").val(bizPbancMaxTm-timeNow);
                        }
                        cloneDiv.after(newDiv);
                        dtlRnd();
                        totalClassTimeSet();
                    }else{
                        alert('시간표를 더 추가하면 사업에서 지원 가능한 최대 수업시수를 초과하게 됩니다. 수업시간표 하나의 최소 수업시수는 2입니다.')
                    }
                }

                function removeList(delBtn) {
                    let CONT =  [[ ${content} ]];
                    let table = delBtn.parentElement.parentElement.parentElement.parentElement;
                    let btnList = table.querySelectorAll('.dtl_list').length;

                    if (btnList == 1) { // 삭제 버튼 1개일 때(테이블 리스트 1개일 때)
                        alert('현재 수업시간표가 1회차라서 삭제할 수 없습니다.');
                        return;
                    }

                    if(confirm("정말로 삭제하시겠습니까? 새로고침해도 복구되지 않습니다.")){
                        let data =getDtlOrig();
                        let tr = $(delBtn).parent().parent();
                        let index = $(tr).find(".bizOrgAplyDtlIndex").val();
                        if(index && index!=''){
                            $.ajax({
                                type: "delete",
                                headers: {'Content-Type' : 'application/json'},
                                url: `/api/business/organization/aply/dtl/delete/${data[index].bizOrgAplyDtlNo}`,
                                data: JSON.stringify(data[index]),
                                dataType: "json",
                                success:function (data){
                                    delBtn.parentElement.parentElement.remove();
                                    dtlRnd();
                                    totalClassTimeSet();
                                    planDtl();

                                    CONT[0].bizOrgAplyTime = $("#bizOrgAplyTime").val();
                                    CONT[0].bizOrgAplyLsnPlanBgng =$('#date1').val();
                                    CONT[0].bizOrgAplyLsnPlanEnd =$('#date2').val();
                                    $.ajax({
                                        type: "put",
                                        headers: {'Content-Type' : 'application/json'},
                                        url: "/api/business/organization/aply/update",
                                        data: JSON.stringify(CONT[0]),
                                        dataType: "json",
                                        success: function (data){
                                            alert('수업시간표가 삭제되었습니다.')
                                        },error:function (e){
                                            alert('수업시간표를 삭제하고 총 교육시간을 반영하는 과정에서 오류가 발생하였습니다. 하단의 수정하기 버튼을 눌러주세요.');
                                        }
                                    })
                                },
                                error:function (e){
                                    if(e && e.responseJSON && e.responseJSON.resultMessage){
                                        alert(e.responseJSON.resultMessage);
                                    }else{
                                        alert('수업시간표 삭제하는 과정에서 오류가 발생하였습니다.');
                                    }
                                }
                            })
                        }else{
                            delBtn.parentElement.parentElement.remove();
                            dtlRnd();
                            totalClassTimeSet();
                            planDtl();
                        }
                    }
                }

                //수업시수 검사
                function changeDtlHr(input){
                    if($(input).val()<2){
                        alert("수업시수는 2보다 커야 합니다.")
                        $(input).val(2)
                    }
                    totalClassTimeSet();
                }
                //총 교육시간, 최초 총 교육시간
                function totalClassTimeSet() {
                    let totalClassTime = 0;

                    for (let i = 0; i < $('.bizOrgAplyLsnDtlHr').length; i++) {
                        totalClassTime = Number(totalClassTime);
                        totalClassTime += Number($('.bizOrgAplyLsnDtlHr')[i].value);
                    }

                    if(bizPbancMaxTm!=0){
                        if(parseInt(totalClassTime)>bizPbancMaxTm){
                            totalClassTime = Number(bizPbancMaxTm);
                            $('#bizOrgAplyTime').attr('value', totalClassTime);
                            alert("총 교육시간이 사업공고의 최대 시간보다 큽니다. 수업시수를 확인해 주세요.");
                            return false
                        }
                    }

                    $('#bizOrgAplyTime').attr('value', totalClassTime);
                    if(bizStts){
                        $('#bizOrgAplyTimeFrst').attr('value', totalClassTime);
                    }
                    return true;
                }
                totalClassTimeSet();

                // 시작시간 ~ 종료시간 계산(수업시간)
                function classTime(time) {
                    const dtl_list = document.querySelectorAll('.dtl_list');
                    let tr = time.parentElement.parentElement.parentElement;
                    let tr_idx = '';
                    $('.dtl_list').each(function(idx, item){
                        if (tr == item) {
                            tr_idx = idx;
                        }
                    });

                    if($(time).hasClass("bgng1")){
                        $(tr).find(".end1").removeAttr('disabled');
                        $(tr).find(".end2").removeAttr('disabled');
                        sortPlanDtl();
                    }

                    let bgng1Val = $('.dtl_list').eq(tr_idx).find('.bgng1').val();
                    let bgng2Val = $('.dtl_list').eq(tr_idx).find('.bgng2').val();
                    let end1Val = $('.dtl_list').eq(tr_idx).find('.end1').val();
                    let end2Val = $('.dtl_list').eq(tr_idx).find('.end2').val();

                    // // 시작 시가 종료 시보다 클 때
                    if (bgng1Val != '0' && end1Val != '0' && bgng1Val > end1Val) {
                        alert('시작 시간이 종료 시간보다 큽니다. 수업시간표를 다시 확인해 주세요.');
                        return false;
                    }else if (bgng1Val != '0' && bgng2Val != '60' && end1Val != '0' && end2Val != '60') {
                        // 시작 시와 종료 시가 같고, 시작 분이 종료 분보다 클 때
                        if (bgng1Val == end1Val && bgng2Val > end2Val) {
                            alert('시작 시간과 종료 시간이 같습니다. 수업시간표를 다시 확인해 주세요.');
                            return false;
                        }
                    }else {
                        return true;
                    }
                }
                /* ]]> */
            } else {
                alert( [[${authError}]] );
                history.back();
            }

            function methEtc(val) {
                $('#bizOrgAplyOperMethEtc').hide()
                if (val == '교과수업' || val == '기타') {
                    $('#bizOrgAplyOperMethEtc').show()
                } else {
                    $('#bizOrgAplyOperMethEtc').hide()
                }
            }
        </script>
    </th:block>
</div>
</body>
</html>
